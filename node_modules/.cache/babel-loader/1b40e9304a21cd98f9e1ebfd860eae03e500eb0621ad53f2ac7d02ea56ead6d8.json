{"ast":null,"code":"// ProductData/index.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import'./InputTitle.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function InputTitle(){const[inputData,setInputData]=useState('');const[responseMessage,setResponseMessage]=useState('');const[showMessage,setShowMessage]=useState(false);// 初次載入時向後端請求資料\nuseEffect(()=>{async function fetchTitle(){try{const response=await axios.get('http://localhost:5000/api/get_title');setInputData(response.data.Title||'');// 設定初始值\n}catch(error){var _error$response,_error$response$data;setResponseMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'無法取得初始資料');}}fetchTitle();},[]);function handleInputChange(e){setInputData(e.target.value);}async function handleSubmit(){if(!inputData.trim()){setResponseMessage('請輸入標題');return;}try{const response=await axios.post('http://localhost:5000/api/save_HomeData',{Title:inputData,CustomerUuid:'example-customer-uuid',TitleImg:'',Title_Status:1});setResponseMessage(response.data.message||'操作成功');setShowMessage(true);// 顯示訊息\n}catch(error){var _error$response2,_error$response2$data;setResponseMessage(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'發生錯誤');}}return/*#__PURE__*/_jsxs(\"div\",{className:\"InputTitleinput-group\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u5716\\u7247\\u6A19\\u984C\"}),/*#__PURE__*/_jsx(\"input\",{className:\"InputTitleinput-box\",type:\"text\",value:inputData,onChange:handleInputChange,placeholder:\"\\u8F38\\u5165\\u6A19\\u984C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"InputTitle-btn-input\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"InputTitlesubmit-button\",onClick:handleSubmit,children:\"send\"}),/*#__PURE__*/_jsxs(\"a\",{className:`red-message ${showMessage?'visible':'hidden'}`,children:[\"\\u4FEE\\u6539\\u6210\\u529F: \",responseMessage]})]})]});}export default InputTitle;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","InputTitle","inputData","setInputData","responseMessage","setResponseMessage","showMessage","setShowMessage","fetchTitle","response","get","data","Title","error","_error$response","_error$response$data","handleInputChange","e","target","value","handleSubmit","trim","post","CustomerUuid","TitleImg","Title_Status","message","_error$response2","_error$response2$data","className","children","type","onChange","placeholder","onClick"],"sources":["C:/類D槽/Python/StockWeb/webtest/src/pages/Page1/HomeData/components/InputTitle.js"],"sourcesContent":["// ProductData/index.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './InputTitle.css'\r\n\r\nfunction InputTitle() {\r\n    const [inputData, setInputData] = useState('');\r\n    const [responseMessage, setResponseMessage] = useState('');\r\n    const [showMessage, setShowMessage] = useState(false);\r\n\r\n    // 初次載入時向後端請求資料\r\n    useEffect(() => {\r\n        async function fetchTitle() {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/get_title');\r\n                setInputData(response.data.Title || ''); // 設定初始值\r\n            } catch (error) {\r\n                setResponseMessage(error.response?.data?.error || '無法取得初始資料');\r\n            }\r\n        }\r\n        fetchTitle();\r\n    }, []);\r\n\r\n    function handleInputChange(e){\r\n        setInputData(e.target.value)\r\n    }\r\n\r\n    async function handleSubmit() {\r\n        if (!inputData.trim()) {\r\n            setResponseMessage('請輸入標題');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/save_HomeData', {\r\n                Title: inputData,\r\n                CustomerUuid: 'example-customer-uuid',\r\n                TitleImg: '',\r\n                Title_Status: 1\r\n            });\r\n            setResponseMessage(response.data.message || '操作成功');\r\n            setShowMessage(true); // 顯示訊息\r\n        } catch (error) {\r\n            setResponseMessage(error.response?.data?.error || '發生錯誤');\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"InputTitleinput-group\">\r\n            <h1>圖片標題</h1>\r\n            <input\r\n                    className=\"InputTitleinput-box\"\r\n                    type=\"text\"\r\n                    value={inputData}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"輸入標題\"\r\n                />\r\n            <div className='InputTitle-btn-input'>\r\n\r\n                <button className=\"InputTitlesubmit-button\" onClick={handleSubmit}>send</button>\r\n                <a className={`red-message ${showMessage ? 'visible' : 'hidden'}`}>修改成功: {responseMessage}</a>\r\n            </div>\r\n            \r\n            \r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default InputTitle;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}