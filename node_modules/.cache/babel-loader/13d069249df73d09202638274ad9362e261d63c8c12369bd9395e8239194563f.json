{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Test(){const[newsData,setNewsData]=useState([]);const[responseMessage,setResponseMessage]=useState('');const[loading,setLoading]=useState(true);useEffect(()=>{async function fetchNews(){try{const response=await axios.get('http://localhost:5000/api/get_HomeNews');console.log('API 響應:',response.data);// 調試用\nif(response.data&&Array.isArray(response.data.news)){setNewsData(response.data.news);}else{setResponseMessage('數據格式不正確');}}catch(error){var _error$response,_error$response$data;console.error('獲取新聞錯誤:',error);setResponseMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'無法取得資料');}finally{setLoading(false);}}fetchNews();},[]);const formatDate=dateString=>{if(!dateString)return'日期未設定';try{const date=new Date(dateString);if(isNaN(date.getTime())){return'日期格式錯誤';}return date.toLocaleDateString('zh-TW',{year:'numeric',month:'long',day:'numeric'});}catch(e){console.error('日期格式化錯誤:',e);return'日期格式錯誤';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u8F09\\u5165\\u4E2D...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"news-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u65B0\\u805E\\u5217\\u8868\"}),responseMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:responseMessage}),newsData.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-news\",children:\"\\u66AB\\u7121\\u65B0\\u805E\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"news-list\",children:newsData.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"news-item\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"news-title\",children:item.Title}),/*#__PURE__*/_jsx(\"p\",{className:\"news-content\",children:item.Content}),item.Image_Url&&/*#__PURE__*/_jsx(\"img\",{src:item.Image_Url,alt:item.Title,className:\"news-image\",onError:e=>{e.target.style.display='none';console.log('圖片載入失敗:',item.Image_Url);}}),/*#__PURE__*/_jsxs(\"p\",{className:\"news-date\",children:[\"\\u767C\\u5E03\\u6642\\u9593: \",formatDate(item.Publish_Date)]})]},item.Id||index))})]});}export default Test;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","Test","newsData","setNewsData","responseMessage","setResponseMessage","loading","setLoading","fetchNews","response","get","console","log","data","Array","isArray","news","error","_error$response","_error$response$data","formatDate","dateString","date","Date","isNaN","getTime","toLocaleDateString","year","month","day","e","children","className","length","map","item","index","Title","Content","Image_Url","src","alt","onError","target","style","display","Publish_Date","Id"],"sources":["C:/類D槽/Python/StockWeb/webtest/src/pages/Page1/HomeData/components/test.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction Test() {\r\n    const [newsData, setNewsData] = useState([]);\r\n    const [responseMessage, setResponseMessage] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        async function fetchNews() {\r\n            try {\r\n                const response = await axios.get('http://localhost:5000/api/get_HomeNews');\r\n                console.log('API 響應:', response.data); // 調試用\r\n                \r\n                if (response.data && Array.isArray(response.data.news)) {\r\n                    setNewsData(response.data.news);\r\n                } else {\r\n                    setResponseMessage('數據格式不正確');\r\n                }\r\n            } catch (error) {\r\n                console.error('獲取新聞錯誤:', error);\r\n                setResponseMessage(error.response?.data?.error || '無法取得資料');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        }\r\n        fetchNews();\r\n    }, []);\r\n\r\n    const formatDate = (dateString) => {\r\n        if (!dateString) return '日期未設定';\r\n        try {\r\n            const date = new Date(dateString);\r\n            if (isNaN(date.getTime())) {\r\n                return '日期格式錯誤';\r\n            }\r\n            return date.toLocaleDateString('zh-TW', {\r\n                year: 'numeric',\r\n                month: 'long',\r\n                day: 'numeric'\r\n            });\r\n        } catch (e) {\r\n            console.error('日期格式化錯誤:', e);\r\n            return '日期格式錯誤';\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div>載入中...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"news-container\">\r\n            <h1>新聞列表</h1>\r\n            {responseMessage && <p className=\"error-message\">{responseMessage}</p>}\r\n            {newsData.length === 0 ? (\r\n                <p className=\"no-news\">暫無新聞</p>\r\n            ) : (\r\n                <ul className=\"news-list\">\r\n                    {newsData.map((item, index) => (\r\n                        <li key={item.Id || index} className=\"news-item\">\r\n                            <h3 className=\"news-title\">{item.Title}</h3>\r\n                            <p className=\"news-content\">{item.Content}</p>\r\n                            {item.Image_Url && (\r\n                                <img \r\n                                    src={item.Image_Url} \r\n                                    alt={item.Title} \r\n                                    className=\"news-image\"\r\n                                    onError={(e) => {\r\n                                        e.target.style.display = 'none';\r\n                                        console.log('圖片載入失敗:', item.Image_Url);\r\n                                    }}\r\n                                />\r\n                            )}\r\n                            <p className=\"news-date\">\r\n                                發布時間: {formatDate(item.Publish_Date)}\r\n                            </p>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Test;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}